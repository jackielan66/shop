<template>
    <div id="my-order">
	<!-- 头部 -->
	<!-- <div class="top text-center bg">
        <a href="##">
            <img class="message width-10" src="img/return@2x.png" alt="">
        </a>
		<h1 class="title top_0 S7 C3 width">我的订单</h1>
        <a href="##">
            <span class="search S2 C3">说明</span>
        </a>
	</div> -->

    <div class="order-nav">
        <ul>
            <li>
                <span class="C9 my-order-span">全部</span>
            </li>
            <li>
                <span>待付款</span>
            </li>
            <li>
                <span>待发货</span>
            </li>
            <li>
                <span>已发货</span>
            </li>
        </ul>
        <div class="clearfix"></div>
    </div>
    <div class="order-table">
        <div class="order-box">
            <div class="header">
                <div class="company-name">
                    <img src="img/icon_Supermarket@2x.png" alt="">
                    <span class="S4 C3">宁夏红枸杞公司</span>
                </div>
                <span class="C9 S4">待付款</span>
            </div>
            <div class="clearfix"></div>
            <div class="inftion">
                <div class="img-box">
                    <img src="img/order-img@2x.png" alt="">
                </div>
                <div class="text-box">
                    <h2 class="C3 S5"><span class="order-label1">品牌</span> 宁夏红枸杞酒12度六瓶装六瓶装六瓶装正装正品金选瓶装六瓶装正装正品金选</h2>
                    <div class="shux-box">
                        <div class="span-box">
                            <span class="C2 S10">560ML</span>
                        </div>
                        <div class="number-box">
                            <span class="C3 S6">x<em class="S10">3</em></span>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                </div>
                <div class="clearfix"></div>
                <span class="money S10 C3">¥<em class="S4">100.00</em></span>
            </div>
            <div class="time">
                <div class="time-box">
                    <span class="C2 S10">2018-05-15</span>
                </div>
                <div class="settlement">
                    <span class="S4 C9"><em class="C3">合计：</em><span class="S10">¥</span>657.00</span>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="btn">
                <div class="btn-box">           
                    <button class="btn-border2" type="">取消订单</button>
                    <button class="btn-border1" type="">待付款</button>
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
    </div>

    <div class="order-table">
        <div class="order-box">
            <div class="header">
                <div class="company-name">
                    <img src="img/icon_Supermarket@2x.png" alt="">
                    <span class="S4 C3">宁夏红枸杞公司</span>
                </div>
                <span class="C9 S4">待发货</span>
            </div>
            <div class="clearfix"></div>
            <div class="inftion">
                <div class="img-box">
                    <img src="img/order-img@2x.png" alt="">
                </div>
                <div class="text-box">
                    <h2 class="C3 S5"><span class="order-label1">品牌</span> 宁夏红枸杞酒12度六瓶装六瓶装六瓶装正装正品金选瓶装六瓶装正装正品金选</h2>
                    <div class="shux-box">
                        <div class="span-box">
                            <span class="C2 S10">560ML</span>
                        </div>
                        <div class="number-box">
                            <span class="C3 S6">x<em class="S10">3</em></span>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                </div>
                <div class="clearfix"></div>
                <span class="money S10 C3">¥<em class="S4">100.00</em></span>
            </div>
            <div class="time">
                <div class="time-box">
                    <span class="C2 S10">2018-05-15</span>
                </div>
                <div class="settlement">
                    <span class="S4 C9"><em class="C3">合计：</em><span class="S10">¥</span>657.00</span>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="btn">
                <div class="btn-box">           
                    <button class="btn-border2" type="">取消订单</button>
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
    </div>

    <div class="order-table">
        <div class="order-box">
            <div class="header">
                <div class="company-name">
                    <img src="img/icon_Supermarket@2x.png" alt="">
                    <span class="S4 C3">宁夏红枸杞公司</span>
                </div>
                <span class="C9 S4">已发货</span>
            </div>
            <div class="clearfix"></div>
            <div class="inftion">
                <div class="img-box">
                    <img src="img/order-img@2x.png" alt="">
                </div>
                <div class="text-box">
                    <h2 class="C3 S5"><span class="order-label1">品牌</span> 宁夏红枸杞酒12度六瓶装六瓶装六瓶装正装正品金选瓶装六瓶装正装正品金选</h2>
                    <div class="shux-box">
                        <div class="span-box">
                            <span class="C2 S10">560ML</span>
                        </div>
                        <div class="number-box">
                            <span class="C3 S6">x<em class="S10">3</em></span>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                </div>
                <div class="clearfix"></div>
                <span class="money S10 C3">¥<em class="S4">100.00</em></span>
            </div>
            <div class="time">
                <div class="time-box">
                    <span class="C2 S10">2018-05-15</span>
                </div>
                <div class="settlement">
                    <span class="S4 C9"><em class="C3">合计：</em><span class="S10">¥</span>657.00</span>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="btn">
                <div class="btn-box">           
                    <button class="btn-border2" type="">查看物流</button>
                    <button class="btn-border1" type="">确认收货</button>
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
    </div>

    <div class="order-table">
        <div class="order-box">
            <div class="header">
                <div class="company-name">
                    <img src="img/icon_Supermarket@2x.png" alt="">
                    <span class="S4 C3">宁夏红枸杞公司</span>
                </div>
                <span class="C9 S4">待发货</span>
            </div>
            <div class="clearfix"></div>
            <div class="inftion">
                <div class="img-box">
                    <img src="img/order-img@2x.png" alt="">
                </div>
                <div class="text-box">
                    <h2 class="C3 S5"><span class="order-label2">购惊喜</span> 宁夏红枸杞酒12度六瓶装六瓶装六瓶装正装正品金选瓶装六瓶装正装正品金选</h2>
                    <div class="shux-box">
                        <div class="span-box">
                            <span class="C2 S10">560ML</span>
                        </div>
                        <div class="number-box">
                            <span class="C3 S6">x<em class="S10">3</em></span>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                </div>
                <div class="clearfix"></div>
                <span class="money S10 C3">¥<em class="S4">100.00</em></span>
            </div>
            <div class="time">
                <div class="time-box">
                    <span class="C2 S10">2018-05-15</span>
                </div>
                <div class="settlement">
                    <span class="S4 C9"><em class="C3">合计：</em><span class="S10">¥</span>657.00</span>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="btn">
                <div class="red-packets">
                    <span>红包<em>344.00</em></span>
                </div>
                <div class="btn-box">           
                    <button class="btn-border2" type="">兑换</button>
                    <button class="btn-border1" type="">邮寄</button>
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
    </div>

    <div class="order-table">
        <div class="order-box">
            <div class="header">
                <div class="company-name">
                    <img src="img/icon_Supermarket@2x.png" alt="">
                    <span class="S4 C3">宁夏红枸杞公司</span>
                </div>
                <span class="C9 S4">待发货</span>
            </div>
            <div class="clearfix"></div>
            <div class="inftion">
                <div class="img-box">
                    <img src="img/order-img@2x.png" alt="">
                </div>
                <div class="text-box">
                    <h2 class="C3 S5"><span class="order-label3">兑换</span> 宁夏红枸杞酒12度六瓶装六瓶装六瓶装正装正品金选瓶装六瓶装正装正品金选</h2>
                    <div class="shux-box">
                        <div class="span-box">
                            <span class="C2 S10">560ML</span>
                        </div>
                        <div class="number-box">
                            <span class="C3 S6">x<em class="S10">3</em></span>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                </div>
                <div class="clearfix"></div>
                <span class="money S10 C3">喜币<em class="S4">2000</em></span>
            </div>
            <div class="time">
                <div class="time-box">
                    <span class="C2 S10">2018-05-15</span>
                </div>
                <div class="settlement">
                    <span class="S4 C9"><em class="C3">合计：</em><span class="S10">喜币</span>6000</span>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="btn">
                <div class="btn-box">
                    <button class="btn-border1" type="">确认收货</button>
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
    </div>
    
    </div>
</template>

<script>
import {
  Swipe,
  SwipeItem,
  Indicator,
  Toast,
  Lazyload,
  InfiniteScroll
} from "mint-ui";
import Vue from "vue";
import { URI, WWW, uid } from "@/apiConfig";
import axios from "axios";
import TabBar from "./TabBar";
import qs from "qs";
Vue.use(Lazyload);
Vue.use(InfiniteScroll);
export default {
  name: "MyOrder",

  data() {
    return {
      goodsDetails: {},
      defaultAddress: {},
      order: {},
      WWW,
      loading: true,
      uid,
      amount: 0,
      payType: 1,
      feedback: ""
    };
  },

  created() {},

  mounted() {
    this.goodsDetails = this.$route.params.goodsDetails;
    this.order = this.$route.params.order;
    this.amount = (this.order.num * this.goodsDetails.discountprice).toFixed(2);
    let _params = {
      uid
      //   name:'收货地址陈总',
      //   phone:15960061702,
      //   area:' 福建省的啊',
      //   detail:' 福建省的1313123啊',
      //   defaultAddress:1
    };

    // axios
    //   .get(URI + "/address/addAddress?" + qs.stringify(_params))
    //   .then(res => {
    //     Indicator.close();
    //     // let _data = res.data.data;
    //     // this.GoodsList = _data.pages;
    //     // this.totalCount = _data.totalCount;
    //     // this.loading = false;
    //   });

    // 初始化商地址
    axios
      .get(URI + "/address/getDefaultAddress?" + qs.stringify(_params))
      .then(res => {
        let _data = res.data.data;
        this.defaultAddress = _data;
      });
  },

  methods: {
    onPayTypeChange(type) {
      this.payType = type;
    },
    sumbit() {
      console.log(this.order, "order");
      let _params = Object.assign(
        this.order,
        { type: this.payType },
        { message: this.feedback },
        { addressId: "394b8dedf7e9468fb91380661dd963ce" }
      );
      Indicator.open();
      axios.get(URI + "/pay/goodsPay?" + qs.stringify(_params)).then(res => {
        Indicator.close();
        let _data = res.data;

        Toast(_data.msg);

        // this.GoodsList = _data.pages;
        // this.totalCount = _data.totalCount;
        // this.loading = false;
      });
    }
  },

  components: {
    TabBar
  }
};
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>
.add-add {
  margin-top: 45px !important;
}
</style>
